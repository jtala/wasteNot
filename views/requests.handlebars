<div class="jumboForm">
<div class="welcome">
{{!--     Username here when ready --}}    
    <h2>Recycling Service in the next 10 minutes.</h2>
    <div id="instructions">
    <p> As soon as a request is made a driver will accept it and drive towards the location where the item is. After picking the item up it will be delivered to a recylcing center where it's going to be properly disposed.
      It's time to take care of our planet, we can do it together.
    </p>
     <br><br>
    </div>
</div>

<form id="cms">
    <div class="form-group">
        <br />
        <label for="item_name">Item Name</label>
        <input placeholder="Recyclables" type="text" class="form-control" id="item_name">
        <br />
        <label for="estimated_weight">Estimated Weight (lbs): </label>
        <input placeholder="15 lbs" type="text" class="form-control" id="estimated_weight">
        <br />
        <label for="item_location">Item Location: </label>
        <input placeholder="Los Angeles" type="text" class="form-control" id="item_location">

        <br/>
        <button type="submit" class="submit tile">Submit</button>
    </div>
</form>
</div>
<br><br>

<div class="jumboForm">
<div id="currentRequests">
    <h2>Requests On The Way</h2>

    <table>
  <tr>
    <th>Your Drivers' Name</th>
    <th>Items</th>
    <th>Location</th>
    <th>Weight</th>
    <th>Status</th>
  </tr>
{{!-- Run Handlebars for loop here once driver side is done --}}
{{#each requests}}
{{/each}}
</table>
    
</div>

<br><br>



<div id="logs">
<button type="submit" class="tile submit">Logs</button>
</div>

<br><br>

{{!-- <div class="loader"></div> --}}

</div>

<script>
 $(document).ready(function() {

 
var cItemName = $("#item_name");
var cEstWeight = $("#estimated_weight");
var cItemLocation = $("#item_location");
var cmsForm = $("#cms");


// On click listener for when customer submits form.
$(cmsForm).on("submit", handleFormSubmit);

// Function prevents empty slots, creates an object with customer's data & posts it to the backend. Can be seen in the requests db.
function handleFormSubmit(event) {
    event.preventDefault();
    // Will not submit unless every field has data.
    if (!cItemName.val().trim() || !cEstWeight.val() || !cItemLocation.val() ) {
      return;
    }
    // Take data from form & make a new object for database to read.
    var newCustomer = {
      item: cItemName.val().trim(),
      weight: cEstWeight.val().trim(),
      location: cItemLocation.val().trim()
    };

    console.log(newCustomer);

    // Sending to the backend.
    submitCustomer(newCustomer);
  }

function submitCustomer (post){
    $.post("/api/requests", post, function() {
    console.log("New request data has been posted!");
});
}
});
</script>